{% extends "layout.html" %}
{% block body %}

<div id="wrapper">
    <div id="page-wrapper">
        <div class="col-xs-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-9">
                            <h2> B.S. Computer Engineering </h2>
                        </div>
                         <div class="col-xs-3">
                             <p>
                                <strong>Degree Progress</strong>
                                <span id="prog_bar_num" class="pull-right text-muted">0%</span>
                            </p>
                            <div class="progress progress-striped active" style="background-color: slategray">
                                <div class="progress-bar progress-bar-success" id="prog_bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                                    <span class="sr-only">0% Complete (warning)</span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <!-- .panel-heading -->
                <div class="panel-body" style="padding:6px;">
                    <div class="panel-group" id="flowsheet_container">
                        <div class="row" align="center">

                            <div class="col-xs-12">
                                <div  class="panel-body" style="padding:6px;">
                                    <div id="year1" class="col-xs-3">
                                        <div id="semester1" class="col-xs-6" >
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Semester 1</h3>
                                                </div>
                                                <div class="panel-body" id="sem1" style="padding:6px 4px;">

                                                </div>
                                            </div>
                                        </div>
                                        <div id="semester2" class="col-xs-6" >
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Semester 2</h3>
                                                </div>
                                                <div class="panel-body" id="sem2" style="padding:6px 4px;">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="year2" class="col-xs-3">
                                        <div id="semester3" class="col-xs-6" >
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Semester 3</h3>
                                                </div>
                                                <div class="panel-body" id="sem3" style="padding:6px 4px;">

                                                </div>
                                            </div>
                                        </div>
                                        <div id="semester4" class="col-xs-6" >
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Semester 4</h3>
                                                </div>
                                                <div class="panel-body" id="sem4" style="padding:6px 4px;">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="year3" class="col-xs-3">
                                        <div id="semester5" class="col-xs-6" >
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Semester 5</h3>
                                                </div>
                                                <div class="panel-body" id="sem5" style="padding:6px 4px;">

                                                </div>
                                            </div>
                                        </div>
                                        <div id="semester6" class="col-xs-6" >
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Semester 6</h3>
                                                </div>
                                                <div class="panel-body" id="sem6" style="padding:6px 4px;">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="year4" class="col-xs-3">
                                        <div id="semester7" class="col-xs-6" style="border: 1px;">
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Semester 7</h3>
                                                </div>
                                                <div class="panel-body" id="sem7" style="padding:6px 4px;">

                                                </div>
                                            </div>
                                        </div>
                                        <div id="semester8" class="col-xs-6" >
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Semester 8</h3>
                                                </div>
                                                <div class="panel-body" id="sem8" style="padding:6px 4px;">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-3 col-xs-offset-9">
                                    <div class="col-xs-6 col-xs-offset-6">
                                    <div id="edit_button" class="btn btn-lg btn-primary btn-block">
                                        Edit
                                    </div>
                                </div>
                                </div>
                            </div>
                        </div>
                        <br/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script>

    /* Degree Class Model Definition */
    var Degree = function(ubclass, sem_index,title, link, pre1, pre2, pre3, co1, co2,  user_took){
        this.UBCLASS = ubclass;
        this.SEM_INDEX = sem_index;
        this.LINK = link;
        this.TITLE = title;
        this.PRE_REQ1 = pre1;
        this.PRE_REQ2 = pre2;
        this.PRE_REQ3 = pre3;
        this.CO_REQ1 = co1;
        this.CO_REQ2 = co2;
        this.TAKEN = user_took;
    };
    /* Helper_Table Class Model Definition */
    var Helper_Table = function(user_id){
        this.user_id = user_id;
        this.classes_taken = [];
        for(var x=0;x<40;x++){
            this.classes_taken[x] = 0;
        }
    };


</script>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='custom_ubflow.js') }}"></script>



<script>
    var DEGREE_HANDLES= [];
    var USER_ID =0;
    var NUM_USER_CLASSES_APPLIED = 0;
    var NUM_COURSES_IN_DEGREE = 0;
    /*
     *  Gets the current User ID so the flowsheet can adjust according to their history
     */

    window.onload = function() {
        $.getJSON('/userid', function (dat) {
            var handle_index = 0;
            var id, ubclass, sem_index, link, title, pre1, pre2, pre3;
            console.log(dat);
            if (dat.classes) {
                USER_ID = dat.classes[0].ID;
                $.getJSON('/degreeinfo/' + String(USER_ID), function (dat) {
                    console.log(dat);
                    if (dat.classes) {
                        var x = 0;
                        while (x < dat.classes.length) {
                            id = dat.classes[x].ID;
                            ubclass = dat.classes[x].UBCLASS;
                            sem_index = dat.classes[x].SEM_INDEX;
                            link = "link";
                            title = dat.classes[x].TITLE;
                            pre1 = dat.classes[x].PRE_REQ1;
                            pre2 = dat.classes[x].PRE_REQ2;
                            pre3 = dat.classes[x].PRE_REQ3;
                            co1 = dat.classes[x].CO_REQ1;
                            co2 = dat.classes[x].CO_REQ2;
                            DEGREE_HANDLES[handle_index] = new Degree(ubclass, sem_index, title, link, pre1, pre2, pre3, co1, co2, 1);
                            handle_index += 1;
                            NUM_USER_CLASSES_APPLIED += 1;
                            x = x + 1;
                        }
                    }
                });

                /* Get All Courses, but don't include repeats */
                $.getJSON('/degreeinfo', function (dat) {
                    console.log(dat);
                    if (dat.classes) {
                        var x = 0;
                        while (x < dat.classes.length) {
                            id = dat.classes[x].ID;
                            ubclass = dat.classes[x].UBCLASS;
                            sem_index = dat.classes[x].SEM_INDEX;
                            link = "link";
                            title = dat.classes[x].TITLE;
                            pre1 = dat.classes[x].PRE_REQ1;
                            pre2 = dat.classes[x].PRE_REQ2;
                            pre3 = dat.classes[x].PRE_REQ3;
                            co1 = dat.classes[x].CO_REQ1;
                            co2 = dat.classes[x].CO_REQ2;
                            if (!search_degree_for_repeats(ubclass)) {
                                DEGREE_HANDLES[handle_index] = new Degree(ubclass, sem_index, title, link, pre1, pre2, pre3, co1, co2, 0);
                                handle_index += 1;
                                NUM_COURSES_IN_DEGREE += 1;
                            }
                            x = x + 1;
                        }
                    }

                    populate_semesters();
                });
            }
        });
    }




</script>
<script>
    window.setTimeout(update_progress_bar,500);
    function update_progress_bar(){
        var total_courses = NUM_COURSES_IN_DEGREE + NUM_USER_CLASSES_APPLIED;
        var percentage = (NUM_USER_CLASSES_APPLIED / total_courses) * 100;
        var progress_bar = document.getElementById('prog_bar');
        progress_bar.style.width = String(percentage) + '%';
        var progress_bar_text = document.getElementById('prog_bar_num');
        progress_bar_text.innerText = String(percentage).substring(0, 4) + '%';
    }

    jQuery.fn.shake = function() {
        this.each(function(i) {
            $(this).css({ "position" : "relative" });
            for (var x = 1; x <= 3; x++) {
                $(this).animate({left:-5},5).animate({ left:0},10).animate({left:5},5).animate({left:0},10);
            }
        });
        return this;
    };

    $("#edit_button").click(function() {
        $("#sem1").shake();
        $("#sem2").shake();
        $("#sem3").shake();
        $("#sem4").shake();
        $("#sem5").shake();
        $("#sem6").shake();
        $("#sem7").shake();
        $("#sem8").shake();
    });
</script>
<script type="text/javascript" src="{{ url_for('static', filename='custom_ubflow.js') }}"></script>
{% endblock %}